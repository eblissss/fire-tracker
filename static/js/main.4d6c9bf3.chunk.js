(this["webpackJsonpwildfire-tracker-react-nasa-ol"]=this["webpackJsonpwildfire-tracker-react-nasa-ol"]||[]).push([[0],{102:function(e,t,n){},105:function(e,t,n){"use strict";n.r(t);var r=n(33),s=n.n(r),c=n(79),i=n.n(c),a=(n(102),n(53)),o=n.n(a),l=n(59),u=n(55),j=n(12),f=function(e){var t=e.fileType,n=e.info;return"json"===t||"api"===t?Object(j.jsxs)("div",{className:"fire-info",children:[Object(j.jsx)("h2",{children:"Fire Location Info"}),Object(j.jsxs)("ul",{children:[Object(j.jsxs)("li",{children:["ID: ",Object(j.jsx)("strong",{children:n.id})]}),Object(j.jsxs)("li",{children:["Title: ",Object(j.jsx)("strong",{children:n.title})]})]})]}):"csv"===t?Object(j.jsxs)("div",{className:"fire-info",children:[Object(j.jsx)("h2",{children:"Fire Location Info"}),Object(j.jsxs)("ul",{children:[Object(j.jsxs)("li",{children:["Brightness (K): ",Object(j.jsx)("strong",{children:n.brightness})]}),Object(j.jsxs)("li",{children:["Fire Radiative Power (MW): ",Object(j.jsx)("strong",{children:n.frp})]})]})]}):void 0},d=n(108),b=n(109),O=n(112),h=n(7),x=n(110),p=n(75),v=n(113),g=n(69),w=new b.a({style:new p.b({image:new v.a({scale:[.3,.3],src:"assets/fire.svg"})})}),m=new d.a({layers:[new O.a({source:new x.a,zIndex:0}),w],view:new g.a({center:Object(h.d)([-122.87,42.32]),zoom:5})}),k=function(e){var t=e.fireData,n=e.fileType,s=Object(r.useRef)(),c=Object(r.useState)(null),i=Object(u.a)(c,2),a=i[0],o=i[1];return Object(r.useEffect)((function(){return m.setTarget(s.current),function(){m.setTarget(void 0)}}),[s]),Object(r.useEffect)((function(){w.setSource(t)}),[t]),Object(r.useEffect)((function(){a||m.on("click",(function(e){var t=m.forEachFeatureAtPixel(e.pixel,(function(e){return e}));t?"json"===n||"api"===n?o({id:t.get("id"),title:t.get("title")}):"csv"===n&&o({brightness:t.get("brightness"),frp:t.get("frp")}):o(null)}))})),Object(j.jsx)("div",{ref:s,className:"map",children:a&&Object(j.jsx)(f,{info:a,fileType:n})})},F=function(){return Object(j.jsxs)("div",{className:"loader",children:[Object(j.jsx)("img",{src:"assets/spinloader.svg",alt:"Loading"}),Object(j.jsx)("h1",{children:"Fetching Data"})]})},y=function(e){var t=e.setFile;return Object(j.jsxs)("footer",{className:"footer",children:[Object(j.jsxs)("div",{className:"chooseFile",children:[Object(j.jsx)("button",{onClick:function(){return t("csv")},children:"Use CSV"}),Object(j.jsx)("button",{onClick:function(){return t("json")},children:"Use JSON"}),Object(j.jsx)("button",{onClick:function(){return t("api")},children:"Use API"})]}),Object(j.jsx)("h1",{children:"Wildfire Tracker"})]})},T=n(111),S=n(68),C=n(51);var E=function(e){var t=new T.a,n=new XMLHttpRequest;return n.open("GET",e),n.onload=function(){for(var e=n.responseText,r=[],s=e.indexOf("\n")+1,c=e.indexOf("\n",s);-1!==(c=e.indexOf("\n",s));){var i=e.substr(s,c-s).split(",");s=c+1;var a=Object(h.d)([parseFloat(i[1]),parseFloat(i[0])]);r.push(new S.a({brightness:parseFloat(i[2])||0,frp:parseFloat(i[11])||0,geometry:new C.a(a)}))}t.addFeatures(r)},n.send(),t},I=n(82);function N(){return(N=Object(l.a)(o.a.mark((function e(t){var n,r,s,c,i,a,l,u,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new T.a,e.next=3,fetch(t);case 3:return r=e.sent,e.next=6,r.json();case 6:s=e.sent,c=s.events,i=[],a=Object(I.a)(c);try{for(a.s();!(l=a.n()).done;)8===(u=l.value).categories[0].id&&(j=Object(h.d)(u.geometries[0].coordinates),i.push(new S.a({id:u.id||0,title:u.title||0,link:u.link||0,"Time seen":u.geometries[0].date||0,geometry:new C.a(j)})))}catch(o){a.e(o)}finally{a.f()}return n.addFeatures(i),e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=function(e){return N.apply(this,arguments)},D=function(){var e=Object(r.useState)("json"),t=Object(u.a)(e,2),n=t[0],s=t[1],c=Object(r.useState)(null),i=Object(u.a)(c,2),a=i[0],f=i[1],d=Object(r.useState)(!1),b=Object(u.a)(d,2),O=b[0],h=b[1];return Object(r.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,h(!0),"csv"!==n){e.next=8;break}return e.next=5,E("/data/nasafiredata.csv");case 5:t=e.sent,e.next=18;break;case 8:if("json"!==n){e.next=14;break}return e.next=11,L("/data/nasafireevents.json");case 11:t=e.sent,e.next=18;break;case 14:if("api"!==n){e.next=18;break}return e.next=17,L("https://eonet.sci.gsfc.nasa.gov/api/v2.1/events");case 17:t=e.sent;case 18:f(t),h(!1);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[n]),Object(j.jsxs)("div",{children:[O?Object(j.jsx)(F,{}):Object(j.jsx)(k,{fireData:a,fileType:n}),Object(j.jsx)(y,{setFile:s})]})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,114)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),s(e),c(e),i(e)}))};i.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(D,{})}),document.getElementById("root")),P()}},[[105,1,2]]]);
//# sourceMappingURL=main.4d6c9bf3.chunk.js.map